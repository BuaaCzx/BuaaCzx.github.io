---
layout: post
title: 2024秋 计网理论 理论复习
categories: [期末复习, 数据库]
tags: [计算机网络, 期末复习]
slug: network_final
description: 2025春 计算机网络
---

计网理论，结合课后习题过一遍PPT整理重要知识点

## 第一章 概述

电路交换、报文交换

分组交换：把要传输的数据**分成一个个小包（分组）**，每个包**独立地**在网络中传输，最终在目的地**重新组合还原**。

五层网络模型：综合了 OSI 七层和 TCP/IP 四层

1. 应用层：确定进程间通信的性质，满足用户需要
2. 传输层：实现不同主机上进程间通信，把数据拆分成段进行包装
3. 网络层：对数据进行分组，并为分组选择合适的路由
4. 数据链路层：把网络层传下来的数据组装成帧，实现点到点链路传输
5. 物理层：透明的传输比特流（传输后比特流没有变化）

指标：

1. 发送时延
2. 传输时延：信道长度/电磁波在信道上的传播速率
3. 时延带宽积：传输时延*带宽（最大传输速率）

## 第二章 物理层

码元：用电信号表示一定的比特

多路复用、信道复用：在一条信道上同时传输多种信号

1. 频分复用 FDM：每路信号频率范围不同
2. 时分复用 TDM：每路信号在自己的时间片内独占信道

3. 统计时分复用 STDM：改进的时分复用
4. 波分复用 WDM
5. 码分多址 CDMA：每个地址分配一个码片序列（题目2-16知道怎么算）

## 第三章 数据链路层

主要功能：

1. 封装成帧（帧定界）：在数据的前后分别添加首部和尾部
2. 透明传输：如果数据内部出现控制字符，在其前面添加转义字符（字符填充）
3. 差错控制：CRC 循环冗余校验，假设冗余码n位，就选一个n+1位的除数，在原数后面加n个0，得到的n位余数作为冗余码，接收端把接到的数据除除数，判断余数是否为0（注意这里的除法都是模二除法，即把正常除法的减法变成异或）
4. 流量控制

### 滑动窗口协议

ACKn表示n及n以前的都已经接收到了

- 后退n帧
- 选择性重传

### PPP 协议

通常和 SDH（同步数字体系，用于**光纤传输**的**标准化高速数字传输技术**）结合使用

支持异步传输和同步传输

- 异步传输：字符填充
- 同步传输：零比特填充，遇见连续的五个1就往后面添加一个0

PPP 是面向字节的

### ALOHA 协议（随机访问）

有数据可发，就发送，但是必须收到上一个数据的确认信号ACK后，才可以发送下一个。

### CSMA/CD（以太网）

载波监听多点访问，在发送数据前监听信道上有没有其它站在发送数据

碰撞检测，碰撞强化，碰撞退避

争用期：以太网的端到端往返时延 2*t*（传输速度为10Mb/s时，2*t* = 51.2μs）

基本退避时间：争用期

从 [0, 2^k-1] 随机取一个数，时延就是这个数乘基本退避时间

重传 16 次不成功就丢弃该帧，向高层报告

**以太网帧长≥** **64** **字节，长度小于** **64** **字节的帧为无效帧**（小于64字节的帧如果发生碰撞，双方无法知晓）

### 网桥

根据mac帧对收到的帧进行转发，实现局域网在数据链路层的互联

- 透明网桥

  自学习：收到帧之后先去转发表里更新源地址，然后看表里有没有目标，没有就向除了进入接口的所有接口都发

  生成树算法：防止有环时无休止转发

- 多接口网桥-交换机

### VLAN

在现有局域网基础上，通过将网络站点分组，构成若干逻辑上独立的虚拟局域网

## 第四章 网络层

两种服务：面向连接（虚电路），无连接（数据报）

### IP

<img src="https://gitee.com/hihiczx/pic/raw/master/image-20250602145348196.png" alt="image-20250602145348196" style="zoom: 33%;" />

ARP: IP to 物理地址，请求用广播帧，应答用非广播帧

RARP: 物理地址 to IP

IP数据报校验和算法：首部（IP包头）分成16位，累加，最后有溢出则加回最低位

### 划分子网

<网络号，子网号，主机号>：从主机号借用几位作为子网号

子网掩码：IP和子网掩码做与操作，得到子网IP

CIDR 无分类编址：<网络前缀，主机号>，斜线/后加网络前缀位数

路由聚合：一个CIDR地址块（大地址）可以表示很多地址，查表控制 **最长前缀匹配**

### ICMP 协议

报告出错、测试

### 路由算法

路由器根据路由表转发分组，路由表是路由协议生成的

自洽系统AS

- 内部网关协议IGP：自洽系统内部路由选择，RIP，OSPF
- 外部网关协议EGP：自洽系统之间路由选择，BGP

### RIP 协议

距离向量路由协议，基于Bellman-Ford算法，关键是与相邻路由器交换自己的整个路由表

直连距离为0，距离最长为15，16即为不可达

### OSPF 协议

链路状态路由，基于Dijkstra算法，关键是告知其他所有路由器自己“刚刚知道”的消息分组

仅在链路状态发生变化时发送洪泛信息，泛洪：节点收到分组时，向除了输入链路外的其它链路转发

划分区域：区域内路由器只知道本区域的完整网络，利用洪泛法交换链路状态信息的范围局限于一个区域而不是整个的自治系统

分组直接用IP数据报传输

### BGP 协议

不同AS的路由器之间交换路由信息，无法找到最佳路由

发言人：一般是边界路由器

### 路由器

路由选择，分组转发

### 组播

一对多（非一对一，非一对全部），发送方只发一次数据，网络设备复制发给接收者

### NAT

内网用专用地址时，与Internet通信需要NAT

## 第五章 传输层

应用进程之间的通信，提供端到端服务，实现可靠传输：差错控制，顺序控制，拥塞控制

套接字：(IP:port)

### UDP 协议

用户数据报协议，**不可靠传输协议**，不建立连接，不重传，发送方不会得知失败

构建伪首部，仅在构造校验和时使用，不实际传输

### TCP 协议

面向连接，点对点，可靠交付，全双工（可以同时互相传），面向字节流

**确认号**字段：4字节，期望收到对方的下一个报文段的数据的第一个字节的序号

可靠传输：校验和+超时重传

流量控制：基于滑动窗口协议，报头携带窗口大小，告知接收窗口剩余大小

避免死锁：收到零窗口通知后开始计时，时间到后探测对方窗口大小

拥塞控制：

- 慢启动：从小到大增大发送窗口（每个往返时间*2）

  慢启动门限 ssthresh：窗口小于ssthresh，慢启动；大于，拥塞避免

- 拥塞避免：每个往返时间+1

  发生拥塞后，把ssthresh减半，窗口设为1，慢启动

- 快重传

  接收方收到失序报文段，发送重复确认，收到三次重复确认就重传

- 快恢复

  收到三次重复确认，把ssthresh设为当前窗口的一半，窗口设为调整后ssthresh的值，拥塞避免

发送窗口的上限：拥塞窗口和接收窗口的较小值

连接建立：三次握手四次挥手

## 第六章 应用层

### 域名系统 DNS

基于 UDP 实现，应用可以向本地域名服务器发送域名解析请求（UDP 报文）

- 递归查询：主机向本地域名服务器

  如果本地域名服务器不知道，就由本地域名服务器向根域名服务器发出查询

- 迭代查询：本地域名服务器的查询

  如果不知道，就问根域名服务器，要么给IP，要么告诉本地域名服务器下一步往哪查，**本地域名服务器执行后续查询**

### 文件传输协议 FTP

一个主进程+若干从属进程

两个TCP连接：控制连接、数据连接

### 万维网 WWW

- 标识文档：URL

- 实现超链的协议：HTTP

  基于 TCP 协议，面向事务的客户/服务器协议，不记录客户端状态，端口号 80

  HTTP/1.0：每请求一个文档都要建立一次TCP连接

  HTTP/1.1：持续连接

- 存储和表示：HTML

### 电子邮件

发送：SMTP（优化：MIME）

接收：POP3（从邮件服务器下载电子邮件到本地客户端，然后服务器删掉），IMAP（邮件保留在服务器上）

![image-20250603125905008](https://gitee.com/hihiczx/pic/raw/master/image-20250603125905008.png)

## 第七章 IPv6

128位，冒号十六进制表示

原IPv4首部中的选项功能都放在IPv6扩展首部中

IPv4/IPv6互操作：

- 双协议栈：使用不同协议栈通信
- 隧道技术：把IPv6数据报作为IPv4数据报的数据部分

## 往年题总结

### 2020

1. 7层：表示层、会话层；4层：数据链路层、数据层→网络接口层
2. 发帧，目标IP与主机在同一子网下，直接向目标IP发，否则向网关发
3. CIDR地址聚合
   - 从 **对齐起始地址** 开始
   - 覆盖该 CIDR 块的 **所有** 地址
4. RIP, OSPF
5. TCP 慢启动、拥塞避免
6. TCP 发送窗口计算
7. 帧：前14字节是数据链路层的首部（mac目的+mac源+类型），然后是IP包头，第零个字节中前四位是4/6，后四位是首部的字数（乘4即得字节数，由此可得出数据报的开始位置），源IP和目的IP分别在偏移量为12-15，16-19字节处，偏移量为9的字节表示协议字段（TCP=06，UDP=17）
8. 交换机转发表构建：表里只记录发报方信息，查表查不到就泛洪（注意泛洪时其它交换机会更新表）
